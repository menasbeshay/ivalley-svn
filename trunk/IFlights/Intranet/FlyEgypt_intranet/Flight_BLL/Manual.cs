
// Generated by MyGeneration Version # (1.3.0.3)

using System;
using Flight_DAL;
namespace Flight_BLL
{
	public class Manual : _Manual
	{
		public Manual()
		{
		
		}

        public virtual bool GetManualsByCatID(int CatID)
        {
            return LoadFromRawSql(@"select M.*, U.username UpdatedByName , C.username CreatedByName ,
                                    (Select Top 1 path from ManualVersion MV where MV.ManualID = M.ManualID Order by MV.LastUpdatedDate desc) VersionPath       
                                    from Manual M
                                    Left join aspnet_users U on M.UpdatedBy = U.UserID
                                    Left join aspnet_users C on M.CreatedBy = C.UserID                                    
                                    where ManualCategoryID = {0} order by CreatedDate desc", CatID);            
        }

        public virtual bool GetFormsByCatID(int CatID)
        {
            this.Where.ManualCategoryID.Value = CatID;
            this.Where.ManualCategoryID.Operator = MyGeneration.dOOdads.WhereParameter.Operand.Equal;
            this.Where.IsForm.Value = true;
            this.Where.IsForm.Operator = MyGeneration.dOOdads.WhereParameter.Operand.Equal;
            return this.Query.Load();
        }
	}
}
