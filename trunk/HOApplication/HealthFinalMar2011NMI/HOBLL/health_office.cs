
// Generated by MyGeneration Version # (1.2.0.7)

using System;
using MHO.DAL;
using System.Data;
using System.Data.SqlClient;
using System.Collections.Specialized;

namespace MHO.BLL
{
	public class health_office : _Health_Office
	{
		public health_office()
		{
		
		}
        public DataTable GetHealthOfficeDetails(short govID, short civilId)
        {
            
                SqlDataReader searchResult = null;
                ListDictionary parm = new ListDictionary();
                parm.Add("@GovId", govID);
                parm.Add("@CivilId", civilId);
                searchResult = LoadFromSqlReader("GetHealthOffices", parm) as SqlDataReader;
                DataTable ResultTable = new DataTable();
                newAdapter da = new newAdapter();
                if (searchResult != null && searchResult.HasRows)
                {
                    da.FillFromReader(ResultTable, searchResult);
                }
                return ResultTable;
            
        }

        public DataTable GetDefaultHealthOfficeData(string loggedIP)
        {
            SqlDataReader searchResult = null;
            ListDictionary parm = new ListDictionary();
            parm.Add("@HealthOfficeIP", loggedIP);
            searchResult = LoadFromSqlReader("Mho_Gui_GetDefaultHealthOfficeData", parm) as SqlDataReader;
            DataTable ResultTable = new DataTable();
            newAdapter da = new newAdapter();
            if (searchResult != null && searchResult.HasRows)
            {
                da.FillFromReader(ResultTable, searchResult);
            }
            return ResultTable;
        }


        /// <summary>
        /// Check if the Descision number exisit in Born or death case
        /// </summary>
        /// <param name="_descNo">reference for descision number</param>
        /// <param name="_isBorn">flag to indecate the table to check</param>
        /// <returns>boolean with the result.</returns>
        public bool IsDecisionNumberExisit(string _descNo,int _orgID,bool _isBorn)
        {
            SqlDataReader searchResult = null;
            ListDictionary parm = new ListDictionary();
            parm.Add("@descNo", _descNo);
            parm.Add("@ISBorn", _isBorn);
            parm.Add("@orgID", _orgID);
            searchResult = LoadFromSqlReader("CheckDecisionNoExist", parm) as SqlDataReader;
            DataTable ResultTable = new DataTable();
            newAdapter da = new newAdapter();
            if (searchResult != null && searchResult.HasRows)
            {
                da.FillFromReader(ResultTable, searchResult);
            }
            return ResultTable.Rows.Count > 0;
        }

	}
}
