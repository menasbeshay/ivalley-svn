if(typeof(MessageHelper)=="undefined"||!MessageHelper||!MessageHelper.topicNamespace){MessageHelper={messages:{},identifier:"",getCurrentYear:function(){return new Date().getFullYear()},getCurrentMonth:function(){return new Date().getMonth()+1},getCurrentDay:function(){return new Date().getDate()},getRenderContextProperty:function(context,propertyName){console.debug("enter getRenderContextProperty with propertyName = "+propertyName);if(context==null){console.debug("context is null. Return null...");return null}var result=context.properties[propertyName];console.debug("the found property value is: "+result);return result},setMessage:function(key,msg){this.messages[key]=msg},showHideMessageArea:function(topOffset){cursor_clear();if(topOffset==null||topOffset==undefined){topOffset=0}var node=dojo.byId("MessageArea");var page=dojo.byId("page");if(page!=null){var coords=dojo.coords(page,true);var width=coords.w;if(dojo.isSafari||dojo.isChrome){width=dojo.style("page","width")}dojo.style(node,{width:width+20+"px",left:coords.x-10+"px",top:(coords.y+topOffset)+"px"})}var fadeInAnimArgsArray=new Array();fadeInAnimArgsArray.node=node;fadeInAnimArgsArray.duration=200;fadeInAnimArgsArray.delay=0;var fadeOutAnimArgsArray=new Array();fadeOutAnimArgsArray.node=node;fadeOutAnimArgsArray.duration=500;fadeOutAnimArgsArray.delay=7000;fadeOutAnimArgsArray.onEnd=function(){dojo.style(node,"display","none");dojo.style(node,"opacity",100)};dojo.style(node,"opacity",0);dojo.style(node,"display","block");var fadeInAnim=dojo.fadeIn(fadeInAnimArgsArray);var fadeOutAnim=dojo.fadeOut(fadeOutAnimArgsArray);dojo.fx.chain([fadeInAnim,fadeOutAnim]).play()},hideMessageArea:function(){cursor_clear();var node=dojo.byId("MessageArea");var fadeOutAnimArgsArray=new Array();fadeOutAnimArgsArray.node=node;fadeOutAnimArgsArray.duration=500;fadeOutAnimArgsArray.onEnd=function(){dojo.style(node,"display","none");dojo.style(node,"opacity",100)};dojo.fadeOut(fadeOutAnimArgsArray).play();dojo.byId("ErrorMessageText").innerHTML=""},displayErrorMessage:function(msg,topOffset,showType){if(topOffset==null||topOffset==undefined){topOffset=0}if(showType==undefined||showType==null||showType==true){if(this.messages.ERROR_MESSAGE_TYPE!=null&&this.messages.ERROR_MESSAGE_TYPE!="undefined"){}}this.setMessageAreaStyle("2");openErrorDialog(msg)},setMessageAreaStyle:function(styleId){if(dojo.byId("MessageArea")!=null){dojo.byId("MessageArea").className="msgpopup"+styleId}},displayStatusMessage:function(msg,topOffset){openSuccessDialog(msg)},hideAndClearMessage:function(){dojo.byId("ErrorMessageText").innerHTML="";dojo.byId("MessageArea").style.display="none"},adjustCoordinates:function(topOffset){if(dojo.style("MessageArea","display")!="none"){var page=dojo.byId("page");var node=dojo.byId("MessageArea");if(page!=null&&node!=null){var coords=dojo.coords(page,true);var width=coords.w;if(dojo.isSafari){width=dojo.style("page","width")}if(topOffset==null||topOffset==undefined){topOffset=0}dojo.style(node,{width:width+20+"px",left:coords.x-10+"px",top:(coords.y+topOffset)+"px"})}}},formErrorHandle:function(serviceResponse,formName){this.formErrorHandleClient(serviceResponse.errorMessageParam,serviceResponse.errorMessage)},formErrorHandleClient:function(id,errorMessage){var element=dojo.byId(id);if(errorMessage==null){console.debug("formErrorHandleClient: The error message is null.");return}if(element){if(this.identifier!=(id+"_tooltip")){this.identifier=id+"_tooltip";var node=document.createElement("div");var imgDirPath=getImageDirectoryPath();node.innerHTML=errorMessage;node=$(node).addClass("dijitTooltipContainer dijitTooltipContents");var tooltip=$('<div class="dijitTooltip dijitTooltipRight"></div>').append(node);tooltip.appendTo("body");tooltip.position({my:"left center",at:"right center",of:element});tooltip.focus();var mh=this;var fn=function(){tooltip.fadeOut(function(){$(this).remove();mh.clearCurrentIdentifier()})};$(document).one("click",fn);setTimeout(fn,5000);window.scrollTo(tooltip.offset().left,tooltip.offset().top)}}},clearCurrentIdentifier:function(){this.identifier=""},emptyFunc:function(event){},containsDoubleByte:function(target){var str=new String(target);var oneByteMax=127;for(var i=0;i<str.length;i++){chr=str.charCodeAt(i);if(chr>oneByteMax){return true}}return false},isValidEmail:function(strEmail){if(this.containsDoubleByte(strEmail)){return false}if(strEmail.length==0){return true}else{if(strEmail.length<5){return false}else{if(strEmail.indexOf(" ")>0){return false}else{if(strEmail.indexOf("@")<1){return false}else{if(strEmail.lastIndexOf(".")<(strEmail.indexOf("@")+2)){return false}else{if(strEmail.lastIndexOf(".")>=strEmail.length-2){return false}}}}}}return true},isValidUTF8length:function(UTF16String,maxlength){if(this.utf8StringByteLength(UTF16String)>maxlength){return false}else{return true}},utf8StringByteLength:function(UTF16String){if(UTF16String===null){return 0}var str=String(UTF16String);var oneByteMax=127;var twoByteMax=2047;var byteSize=str.length;for(i=0;i<str.length;i++){chr=str.charCodeAt(i);if(chr>oneByteMax){byteSize=byteSize+1}if(chr>twoByteMax){byteSize=byteSize+1}}return byteSize},IsNumeric:function(text,allowDot){if(allowDot){var ValidChars="0123456789."}else{var ValidChars="0123456789"}var IsNumber=true;var Char;for(i=0;i<text.length&&IsNumber==true;i++){Char=text.charAt(i);if(ValidChars.indexOf(Char)==-1){IsNumber=false}}return IsNumber},IsValidPhone:function(text){var ValidChars="0123456789()-+ ";var IsValid=true;var Char;for(i=0;i<text.length&&IsValid==true;i++){Char=text.charAt(i);if(ValidChars.indexOf(Char)==-1){IsValid=false}}return IsValid}}};