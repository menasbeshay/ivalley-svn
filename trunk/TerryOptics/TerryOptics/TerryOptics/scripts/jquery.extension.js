$.extend({displayModalToggle:function($target){$target.addClass("on").siblings().removeClass("on");var upc=$("img",$target).attr("rel");if($target.hasClass("pdp_fr")){var view="fr"}else{if($target.hasClass("pdp_qt")){var view="qt"}else{if($target.hasClass("pdp_sd")){var view="sd"}}}var imgSrc=$.stringTemplate(constants.services.s7,{upc:upc,view:view,width:"1600"});window.iviewer.loadImage(imgSrc)},stringTemplate:function(text,vars,prefix){prefix=prefix||"%";if(vars!=undefined){$.each(vars,function(variable,value){if(text.indexOf(prefix+variable)!=-1){text=text.replace(prefix+variable,value)}})}return text},getParams:function(hash){return $.jsonify((hash)?window.location.hash:window.location.search)},jsonify:function(query){var params={};if(query!=""){query=query.replace("?","").replace("#","");var p=query.substring(0,query.length).split("&");if(p.length>0){$.each(p,function(k,v){if(v!=""){var tmp=v.split("=");var indexOf=tmp[1].indexOf("+");while(indexOf>-1){tmp[1]=tmp[1].replace("+"," ");indexOf=tmp[1].indexOf("+")}params[tmp[0]]=unescape(tmp[1])}})}}return params}});