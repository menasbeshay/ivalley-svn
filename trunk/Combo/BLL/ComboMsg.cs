
// Generated by MyGeneration Version # (1.3.0.3)

using System;
using Combo.DAL;
namespace Combo.BLL
{
	public class ComboMsg : _ComboMsg
	{
		public ComboMsg()
		{
		
		}


        public virtual bool GetMessageById(int MsgId)
        {
            return LoadFromRawSql(@"Select M.*, U.UserName, A.Path ProfilePic , Stuff((select ',' + STR(UM.ComboUserID) from ComboUserMsg UM where UM.ComboMsgID = M.ComboMsgID for XML path('')),1,1,'') ToIds 
                                    from ComboMsg M
                                    Inner Join ComboUser U on M.ComboUserID = U.ComboUserID
                                    Left join Attachment A on U.ProfileImgID = A.AttachmentID
                                    Where M.ComboMsgID = {0}", MsgId);
        }

        public virtual bool GetUserMessages(int UserId)
        {
            return LoadFromRawSql(@"Select M.*, U.UserName, A.Path ProfilePic , Stuff((select ',' + STR(UM.ComboUserID) from ComboUserMsg UM where UM.ComboMsgID = M.ComboMsgID for XML path('')),1,1,'') ToIds 
                                    from ComboMsg M
                                    Inner join ComboMsgUser CM on M.
                                    Inner Join ComboUser U on M.ComboUserID = U.ComboUserID
                                    Left join Attachment A on U.ProfileImgID = A.AttachmentID
                                    Where M.ComboMsgID = {0}", UserId);
        }
	}
}
